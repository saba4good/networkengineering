---
title: 네트워크 패킷이 거치는 프로세스
date: 2021-09-18
tags: [networking_stack]
---

네트워크를 이루는 각 호스트는 어떤 프로세스를 거쳐서 패킷을 받고 그에 대한 응답을 할까?

패킷은 NIC를 거쳐 외부에서 호스트로 들어오게 되는데, 이때 NIC는 cpu에 부하가 덜 가도록 필터링을 하여 패킷을 OSI 윗단으로 보낸다.
즉, 호스트 앞단에 허브가 있다 해도 자신을 향하는 패킷만 cpu가 프로세싱할 수 있도록 미리 다른 목적지를 향하는 패킷을 버린다.
Ethernet NIC가 자신을 향하는 패킷인지 알 수 있는 방법은 도착한 프레임의 목적지 MAC 주소를 보는 것이다.

대다수의 Ethernet NIC가 이렇게 동작하는 것이 기본 모드이지만, 이 경우 다른 목적지로 가는 패킷을 받아볼 수 없다는 문제가 생긴다.
그래서 패킷캡처를 받는 경우엔 NIC 동작 모드를 바꾸어 다른 목적지로 가는 패킷도 전부 cpu로 보내도록 한다.[1]



[1] https://stackoverflow.com/questions/18410320/does-a-nic-know-its-mac-address
