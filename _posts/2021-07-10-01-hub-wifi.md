---
title: 허브/스위치와 wifi/gateway
date: 2021-07-10
tags: [hub,gateway,router]
---

작은 사무실이나 가정집에서 흔히 보는 wifi와 허브는 엄연하게 다른 장비다.
둘이 비슷해 보이는건 여러 IT 기기를 서로 통신할 수 있게 해준다는 것인데, 비슷한 점은 그것이 끝이다.

그럼 어떻게 서로 다른 역할을 수행할까?
gateway 역할을 하는 wifi에서는 서로 다른 대역의 장비끼리 서로 통신이 가능하다.
그 이유는 OSI layer 3의 라우팅을 해주기 때문에 가능한 것이고,
이것이 안될 때 통신이 안되는 이유는 개별 host(여기서는 pc)가 어떻게 패킷을 보내는지를 알아야 한다.

PC에 IP 세팅을 할 때, IP만 넣지 않고, subnet이라는 것을 같이 세팅해주는데,
이 subnet은 이 pc의 IP가 어느 네트웍 대역에 속해있는지를 os(예: windows 10)에게 알려준다.

예를 들어, 사무실 A와 B pc에 각각 아래처럼 세팅했다고 하자.
```
A pc의 IP : 192.168.1.10 255.255.255.0
B pc의 IP : 192.168.1.20 255.255.255.0
```
A와 B는 모두 192.168.1.0/24 라는 같은 네트웍 대역에 속해있다. 
A가 B에게 패킷을 보내려고 하면, A의 OS는 같은 네트웍 대역에 속한 B의 위치를 찾기 위해 B의 IP에 대해 arp request를 보낸다.

이때, 허브나 wifi는 모두 해당 패킷을 B에게 보내기 때문에 통신이 이뤄지는데 문제가 없다.

이번에는 사무실 A와 B pc에 각각 아래처럼 세팅했다고 하자.
```
A pc의 IP : 192.168.1.10 255.255.255.0
B pc의 IP : 192.168.50.20 255.255.255.0
```
A와 B가 속한 네트웍 대역이 다르다.
A가 B에게 패킷을 보내려고 하면, A의 OS는 목적지(B의 IP)가 다른 네트웍 대역에 속해있다는 것을 알고, B가 아닌 A의 gateway에게 패킷을 보낸다.

문제는 여기서부터인데, 허브는 gateway역할을 못하기에 자신이 연결된 gateway로 패킷을 보내고, 그 패킷을 받은 gateway가 A와 B의 IP 대역을 알아야 서로 통신이 가능하다.

그에 반해 wifi는 그 자신이 gateway 역할을 하기 때문에 wifi에 연결만 정상적으로 된다면 서로 통신하는데 문제가 없게 된다.
